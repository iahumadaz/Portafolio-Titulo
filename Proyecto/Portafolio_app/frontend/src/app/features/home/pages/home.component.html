
<!-- home.component.html -->

<!-- Encabezado superior (vacío) para mantener la zona de estado móvil limpia -->
<ion-header translucent></ion-header>

<!-- Contenido principal de la vista Home -->
<ion-content fullscreen class="home-content">
  <!-- 1. Encabezado verde con logo y título centrado -->
  <div class="header-wrapper">
    <div class="logo-container">
      <!-- Logo de la aplicación -->
      <img src="assets/icon/logo.jpg" alt="Cookwell" class="logo-img" />
      <!-- Título principal -->
      <h2 class="header-title">Come sano con lo que tienes a mano</h2>
    </div>
  </div>

  <!-- Espacio para separar visualmente secciones -->
  <br><br><br>

  <!-- 2. Card de búsqueda con ion-searchbar -->
  <div class="search-card">
    <!-- Barra de búsqueda de Ionic vinculada al modelo textoBusqueda -->
    <ion-searchbar
      placeholder="Buscar ingrediente..."
      [(ngModel)]="textoBusqueda"
      (ionClear)="reset()"
      [animated]="true">
    </ion-searchbar>
    <!-- Botón de búsqueda que llama a buscarRecetas() -->
    <ion-button
      expand="block"
      (click)="buscarRecetas()"
      [disabled]="!textoBusqueda.trim()"
      class="search-button">
      Buscar
    </ion-button>
  </div>
  <!-- 3. Sección de resultados de búsqueda -->
  <ng-container *ngIf="busquedaActiva; else defaultSection">
    <!-- Mensaje dinámico según encontremos recetas o no -->
    <h2
      class="section-message"
      [ngClass]="{
        'found': recetas.length > 0,   
        'not-found': recetas.length === 0
      }">
      {{ recetas.length
        ? 'Resultados para "' + textoBusqueda + '"'
        : 'No se encontraron recetas para "' + textoBusqueda + '"' }}
    </h2>
    <!-- Grid de Ionic para mostrar cada receta en tarjetas -->
    <ion-grid>
      <ion-row>
        <ion-col 
          size="12" size-md="6" size-lg="4"
          *ngFor="let receta of recetas">
          <ion-card button [routerLink]="['/detalle_receta', receta.id]">
            <img class="card-image" [src]="receta.imagen_url" [alt]="receta.nombre_receta" />
            <ion-card-header>
              <ion-card-title>{{ receta.nombre_receta }}</ion-card-title>
            </ion-card-header>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>

  </ng-container>

  <!-- 4. Sección por defecto: recomendaciones iniciales -->
  <ng-template #defaultSection>
    <h2 class="section-title">Recetas recomendadas</h2>
    <ion-grid>
      <ion-row>
        <ion-col 
          size="12" size-md="6" size-lg="4"
          *ngFor="let receta of recetas">
          <ion-card button [routerLink]="['/detalle_receta', receta.id]">
            <img class="card-image" [src]="receta.imagen_url" [alt]="receta.nombre_receta" />
            <ion-card-header>
              <ion-card-title>{{ receta.nombre_receta }}</ion-card-title>
            </ion-card-header>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>

  </ng-template>
  <router-outlet></router-outlet>
</ion-content>

<ion-footer>
  <ion-toolbar color="light">
    <app-tab-menu></app-tab-menu>
  </ion-toolbar>
</ion-footer>
